{"version":3,"file":"bfcsTopBar_android.mjs","sources":["../../../../../../topbar/dist/esm/bfcsTopBar_android.mjs"],"sourcesContent":["class BfcsTopBar extends HTMLElement {\n  constructor() {\n    super();\n    this._ffi = top_bar;\n    this._actionList = [];\n  }\n  connectedCallback() {\n    let observer = new MutationObserver((mutations) => {\n      this.collectActions();\n    });\n    observer.observe(this, {\n      subtree: true,\n      childList: true,\n      attributes: true,\n      attributeFilter: [\n        \"disabled\",\n        \"icon\",\n        \"type\",\n        \"description\",\n        \"size\",\n        \"source\"\n      ]\n    });\n    this.collectActions();\n  }\n  disconnectedCallback() {\n  }\n  back() {\n    return new Promise((resolve, reject) => {\n      this._ffi.back();\n      resolve();\n    });\n  }\n  toggleEnabled() {\n    return new Promise((resolve, reject) => {\n      this._ffi.toggleEnabled(0);\n      resolve();\n    });\n  }\n  getEnabled() {\n    return new Promise((resolve, reject) => {\n      const isEnabled = this._ffi.getEnabled();\n      resolve(isEnabled);\n    });\n  }\n  getTitle() {\n    return new Promise((resolve, reject) => {\n      const title = this._ffi.getTitle();\n      resolve(title);\n    });\n  }\n  setTitle(title) {\n    return new Promise((resolve, reject) => {\n      this._ffi.setTitle(title);\n      resolve();\n    });\n  }\n  hasTitle() {\n    return new Promise((resolve, reject) => {\n      const hasTitle = this._ffi.hasTitle();\n      resolve(hasTitle);\n    });\n  }\n  getOverlay() {\n    return new Promise((resolve, reject) => {\n      const isOverlay = this._ffi.getOverlay();\n      resolve(isOverlay);\n    });\n  }\n  toggleOverlay() {\n    return new Promise((resolve, reject) => {\n      this._ffi.toggleOverlay(0);\n      resolve();\n    });\n  }\n  getHeight() {\n    return new Promise((resolve, reject) => {\n      const height = this._ffi.getHeight();\n      resolve(height);\n    });\n  }\n  getColorInt(color = \"#ffffff\", opacity = 0.5) {\n    return parseInt(color.slice(1), 16) + (opacity * 255 << 8 * 3);\n  }\n  getBackgroundColor() {\n    return new Promise((resolve, reject) => {\n      const color = this._ffi.getBackgroundColor();\n      const colorHex = \"#\" + color.toString(16).slice(2);\n      resolve(colorHex);\n    });\n  }\n  setBackgroundColor(colorHex = \"#ffffff\") {\n    return new Promise((resolve, reject) => {\n      const opacity = this.getAttribute(\"opacity\") ? parseFloat(this.getAttribute(\"opacity\")) : 0.5;\n      const color = this.getColorInt(colorHex, opacity);\n      this._ffi.setBackgroundColor(color);\n      resolve();\n    });\n  }\n  getForegroundColor() {\n    return new Promise((resolve, reject) => {\n      const color = this._ffi.getForegroundColor();\n      const colorHex = \"#\" + color.toString(16).slice(2);\n      resolve(colorHex);\n    });\n  }\n  setForegroundColor(colorHex = \"#ffffff\") {\n    return new Promise((resolve, reject) => {\n      const opacity = this.getAttribute(\"opacity\") ? parseFloat(this.getAttribute(\"opacity\")) : 0.5;\n      const color = this.getColorInt(colorHex, opacity);\n      this._ffi.setForegroundColor(color);\n      resolve();\n    });\n  }\n  getActions() {\n    return new Promise((resolve, reject) => {\n      this._actionList = JSON.parse(this._ffi.getActions());\n      resolve(this._actionList);\n    });\n  }\n  setActions() {\n    return new Promise((resolve, reject) => {\n      this._ffi.setActions(JSON.stringify(this._actionList));\n      resolve();\n    });\n  }\n  async collectActions() {\n    this._actionList = [];\n    this.querySelectorAll(\"dweb-top-bar-button\").forEach((childNode) => {\n      let icon = {\n        source: \"\",\n        type: \"NamedIcon\"\n      };\n      if (childNode.querySelector(\"dweb-icon\")) {\n        let $ = childNode.querySelector(\"dweb-icon\");\n        icon.source = $?.getAttribute(\"source\") ?? \"\";\n        icon.type = $?.hasAttribute(\"type\") ? $.getAttribute(\"type\") : \"NamedIcon\";\n        icon.description = $?.getAttribute(\"description\") ?? \"\";\n        icon.size = $?.hasAttribute(\"size\") ? $.getAttribute(\"size\") : void 0;\n      }\n      const bid = childNode.getAttribute(\"bid\");\n      const onClickCode = `document.querySelector('dweb-top-bar-button[bid=\"${bid}\"]').dispatchEvent(new CustomEvent('click'))`;\n      const disabled = childNode.hasAttribute(\"disabled\") ? true : false;\n      this._actionList.push({ icon, onClickCode, disabled });\n    });\n    await this.setActions();\n  }\n  static get observedAttributes() {\n    return [\n      \"title\",\n      \"disabled\",\n      \"backgroudColor\",\n      \"foregroundColor\",\n      \"overlay\",\n      \"opacity\"\n    ];\n  }\n  attributeChangedCallback(attrName, oldVal, newVal) {\n    if (attrName === \"title\") {\n      this.setTitle(newVal);\n    } else if (attrName === \"backgroudColor\") {\n      this.setBackgroundColor(newVal);\n    } else if (attrName === \"foregroundColor\") {\n      this.setForegroundColor(newVal);\n    } else if (attrName === \"overlay\") {\n      if (this.hasAttribute(attrName)) {\n        this._ffi.toggleOverlay(1);\n      }\n    } else if (attrName === \"disabled\") {\n      if (this.hasAttribute(attrName)) {\n        this._ffi.toggleEnabled(1);\n      }\n    }\n  }\n}\nexport { BfcsTopBar };\n//# sourceMappingURL=bfcsTopBar_android.mjs.map\n"],"names":[],"mappings":"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"}