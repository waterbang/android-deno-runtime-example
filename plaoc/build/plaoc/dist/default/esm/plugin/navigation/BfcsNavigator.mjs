var t,e,n,i,s,r,o,h,a=(t,e,n)=>(((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)})(t,e,"read from private field"),n?n.call(t):e.get(t)),f=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)};import{EvtOut as c}from"../common/EvtOut.mjs";const p=class{constructor(a,p,u){f(this,t,[]),f(this,e,new c),f(this,n,new c),f(this,i,new c),f(this,s,new WeakSet),f(this,r,new c),f(this,o,new c),f(this,h,new c),this.info=a,this.parentInfo=p,this._ffi=u}get length(){return a(this,t).length}at(e){return a(this,t)[e<0?a(this,t).length+e:e]}push(n){const i=this._ffi.push(this.info.nid,n);return i&&(a(this,t).push(n),a(this,e).emit({route:n})),i}get onPush(){return a(this,e).toAsyncGenerator()}pop(e=1){const i=this._ffi.pop(this.info.nid,e);if(i>0)for(const s of a(this,t).splice(-i))a(this,n).emit({route:s});return i}get onPop(){return a(this,n).toAsyncGenerator()}replace(e,n=-1){const s=n<0?a(this,t).length+n:n;if(s in a(this,t)==!1)return!1;const r=this._ffi.replace(this.info.nid,s,e);if(r){const s=a(this,t).splice(n,1,e);a(this,i).emit({newRoute:e,oldRoute:s[0]})}return r}get onReplace(){return a(this,i).toAsyncGenerator()}fork(t){const e=this._ffi.fork(this.info.nid,t.data);if(e>=0){const n=new p(Object.freeze({data:t.data,nid:e}),this.info,this._ffi);return a(this,s).add(n),a(this,r).emit({newNavigator:n,fromNavigator:this}),n}}get onFork(){return a(this,r).toAsyncGenerator()}checkout(t){return!1!==a(this,s).has(t)&&this._ffi.checkout(this.info.nid,t.info.nid)}get onActivated(){return a(this,o).toAsyncGenerator()}destroy(t,e){if(!1===a(this,s).has(t))return!1;const n=this._ffi.destroy(this.info.nid,t.info.nid);return n&&(a(this,s).delete(t),a(t,h).emit({reason:e})),n}get onDestroy(){return a(this,h).toAsyncGenerator()}};let u=p;t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new WeakMap,s=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap;export{u as BfcsNavigator};
